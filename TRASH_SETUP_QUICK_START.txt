Panduan Setup Fitur Menu Sampah - Quick Start
=============================================

ğŸ¯ Langkah-langkah Implementasi:

1. BUAT TABEL DATABASE
   âœ“ Akses: http://localhost/PROJECT ARSIP LOKER/setup_trash_table.php
   âœ“ Login sebagai admin
   âœ“ Script akan otomatis membuat 2 tabel: document_trash dan trash_audit_logs

2. VERIFIKASI SETUP
   âœ“ Menu "Sampah" harus muncul di sidebar admin/staff
   âœ“ Posisi: Setelah "Lemari Pemusnahan"

3. TEST FITUR
   âœ“ Hapus 1 dokumen dari "Dokumen Keseluruhan"
   âœ“ Dokumen seharusnya hilang dari view aktif
   âœ“ Akses "Menu Sampah" - dokumen harus ada dengan countdown 30 hari
   âœ“ Coba "Pulihkan" - dokumen kembali ke aktif
   âœ“ Hapus lagi, kali ini "Hapus Permanen" (tidak bisa di-restore)

ğŸ“‹ FILE YANG DIMODIFIKASI/DIBUAT:

Tabel Database:
â”œâ”€ create_trash_table.sql .......................... SQL untuk membuat tabel
â””â”€ setup_trash_table.php ........................... Setup script (auto-create)

Halaman Baru:
â”œâ”€ documents/trash.php ............................. Menu Sampah (fitur restore)
â””â”€ cleanup_trash.php ............................... Auto-cleanup >30 hari

Modifikasi Penghapusan:
â”œâ”€ documents/delete.php ............................ Hapus dokumen aktif â†’ sampah
â”œâ”€ documents/delete_all.php ........................ Hapus semua aktif â†’ sampah
â””â”€ documents/delete_all_pemusnahan.php ............ Hapus pemusnahan â†’ sampah

UI/Menu:
â””â”€ includes/sidebar.php ............................ Tambah menu Sampah ke sidebar

Dokumentasi:
â”œâ”€ TRASH_FEATURE_GUIDE.md .......................... Panduan lengkap fitur
â””â”€ TRASH_SETUP_QUICK_START.txt .................... File ini

âš™ï¸ SETUP CRON JOB (Optional - untuk auto cleanup):

Tambahkan ke cron jobs server:

  0 2 * * * curl http://localhost/PROJECT%20ARSIP%20LOKER/cleanup_trash.php

Atau dengan cPanel:
  1. Login cPanel
  2. Masuk ke Cron Jobs
  3. Tambah command di atas
  4. Set schedule: Daily, 2:00 AM

âš¡ FITUR UTAMA:

âœ“ Dokumen dihapus tidak langsung permanen, tapi masuk sampah
âœ“ Bisa dipulihkan dalam 30 hari
âœ“ Bisa dihapus permanen kapan saja (tidak bisa di-restore)
âœ“ Bulk actions untuk menghapus beberapa dokumen sekaligus
âœ“ Countdown visual (merah/kuning/biru) sisa hari restore
âœ“ Auto-cleanup dokumen >30 hari
âœ“ Audit trail lengkap di trash_audit_logs
âœ“ Log aktivitas di activity_logs

ğŸ“Š DATABASE:

Tabel Baru:
1. document_trash .................. Menyimpan dokumen yang dihapus
2. trash_audit_logs ................ Audit trail operasi trash

Fields Penting document_trash:
- original_document_id: ID dokumen asli
- full_name: Nama lengkap pemilik
- deleted_at: Kapan dihapus
- restore_deadline: Batas waktu restore (30 hari)
- status: in_trash, restored, permanently_deleted

ğŸ” KEAMANAN:

âœ“ Hanya admin yang bisa akses Menu Sampah
âœ“ Permanent delete perlu konfirmasi
âœ“ Semua operasi tercatat di audit log
âœ“ Cleanup script bisa di-protect dengan token

â“ TROUBLESHOOTING:

Q: Tabel tidak terbuat?
A: Pastikan logged in sebagai admin, akses setup_trash_table.php

Q: Menu Sampah tidak muncul?
A: Clear browser cache, atau restart aplikasi

Q: Dokumen tidak bisa di-restore?
A: Cek apakah sudah melewati deadline 30 hari

Q: Cleanup tidak berfungsi?
A: Pastikan file permissions folder documents/uploads/ correct

ğŸ“ BANTUAN LEBIH LANJUT:

Lihat dokumentasi lengkap di:
/PROJECT ARSIP LOKER/TRASH_FEATURE_GUIDE.md

Status: âœ… Ready to Deploy
Version: 1.0
